<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AD-Guard AI (No API Demo)</title>

  <!-- favicon 404 ì œê±° -->
  <link rel="icon" href="data:,">

  <!-- Tailwind CDN (ë°ëª¨ìš©) -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-50 text-slate-900">
  <header class="sticky top-0 z-10 border-b bg-white/80 backdrop-blur">
    <div class="mx-auto max-w-4xl px-4 py-4 flex items-center justify-between">
      <div>
        <div class="text-lg font-extrabold">AD-Guard AI</div>
        <div class="text-xs text-slate-500">ë°ëª¨ ëª¨ë“œ(í‚¤ ì—†ì´ ë™ì‘) Â· ê·œì¹™ ê¸°ë°˜ ì ê²€</div>
      </div>
      <span class="text-xs px-2 py-1 rounded-full bg-slate-100 text-slate-700">FREE</span>
    </div>
  </header>

  <main class="mx-auto max-w-4xl px-4 py-6 space-y-4">
    <section class="bg-white rounded-2xl shadow-sm border border-slate-100 p-4">
      <div class="flex flex-wrap gap-2 mb-3">
        <button id="ex1" class="text-xs px-3 py-1.5 rounded-full bg-slate-100 hover:bg-slate-200">ì˜ˆì‹œ1(ë‹¤ì´ì–´íŠ¸)</button>
        <button id="ex2" class="text-xs px-3 py-1.5 rounded-full bg-slate-100 hover:bg-slate-200">ì˜ˆì‹œ2(í™”ì¥í’ˆ)</button>
        <button id="ex3" class="text-xs px-3 py-1.5 rounded-full bg-slate-100 hover:bg-slate-200">ì˜ˆì‹œ3(AIì„œë¹„ìŠ¤)</button>
      </div>

      <textarea
        id="input"
        class="w-full min-h-[160px] rounded-xl border border-slate-200 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-slate-300"
        placeholder="ì—¬ê¸°ì— ê´‘ê³  ë¬¸êµ¬ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”â€¦"
      ></textarea>

      <div class="mt-3 flex items-center gap-2">
        <button
          id="analyzeBtn"
          class="px-4 py-2 rounded-xl font-bold text-sm text-white bg-slate-900 hover:bg-slate-800"
        >
          ê²€ì‚¬
        </button>
        <div id="hint" class="text-xs text-slate-500">
          â€» AI í˜¸ì¶œ ì—†ì´ ê·œì¹™ ê¸°ë°˜ìœ¼ë¡œ ì¦‰ì‹œ ì ê²€í•©ë‹ˆë‹¤.
        </div>
      </div>
    </section>

    <section id="outputCard" class="hidden bg-white rounded-2xl shadow-sm border border-slate-100 p-4">
      <div class="flex items-center justify-between mb-3">
        <div class="font-bold">ë¶„ì„ ê²°ê³¼</div>
        <button
          id="copyBtn"
          class="text-xs px-3 py-1.5 rounded-full bg-slate-900 text-white hover:bg-slate-800"
        >
          ê²°ê³¼ ì „ì²´ ë³µì‚¬
        </button>
      </div>
      <pre id="output" class="whitespace-pre-wrap text-sm leading-6 text-slate-800"></pre>
      <div class="mt-3 text-xs text-slate-500" id="sourceLine"></div>
    </section>
  </main>

  <footer class="py-8 text-center text-xs text-slate-500">
    Â© AD-Guard AI Â· Demo (No API)
  </footer>

  <script>
    const SOURCE_LINE = 'ì¶œì²˜: AD-Guard AI (https://no11519-hue.github.io/ad-guard-ai/)';
    document.getElementById('sourceLine').textContent = SOURCE_LINE;

    const RULES = [
      {
        name: 'í™•ì •/ë³´ì¥',
        regex: /(100%|ë¬´ì¡°ê±´|ë³´ì¥|í™•ì‹¤|ì™„ë²½|ì „ë¶€|ì ˆëŒ€)/g,
        reason: 'í™•ì •Â·ë³´ì¥ í‘œí˜„ì€ ê³¼ì¥/ì˜¤í•´ë¡œ í•´ì„ë  ìˆ˜ ìˆì–´ìš”.',
        replace: 'ê°œì¸ì°¨ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë©° ë„ì›€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
      },
      {
        name: 'ë‹¨ê¸°ê°„ ê³¼ì¥',
        regex: /(í•˜ë£¨|1ì¼|2ì¼|3ì¼|ë‹¨\\s*\\d+ì¼|ì¦‰ì‹œ|ë°”ë¡œ|ìˆœì‹ê°„)/g,
        reason: 'ë„ˆë¬´ ë¹ ë¥¸ ê²°ê³¼ë¥¼ ë‹¨ì •í•˜ë©´ ê³¼ì¥ìœ¼ë¡œ ë³´ì¼ ìˆ˜ ìˆì–´ìš”.',
        replace: 'ì‚¬ìš© í™˜ê²½ì— ë”°ë¼ ì²´ê° ì‹œì ì€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
      },
      {
        name: 'ë¶€ì‘ìš© 0',
        regex: /(ë¶€ì‘ìš©\\s*0%|ë¶€ì‘ìš©\\s*ì—†ìŒ|ì•ˆì „\\s*ë³´ì¥)/g,
        reason: 'ë¶€ì‘ìš© â€˜ì—†ìŒ/0%â€™ ë‹¨ì •ì€ ìœ„í—˜í•´ìš”.',
        replace: 'ì‚¬ìš©ìì— ë”°ë¼ ë°˜ì‘ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
      },
      {
        name: 'ì˜í•™/ì¹˜ë£Œ ë‹¨ì •',
        regex: /(ì™„ì¹˜|ì¹˜ë£Œ|í†µì¦\\s*í•´ê²°|ë³‘\\s*ë‚«|ì•½\\s*ëŒ€ì‹ )/g,
        reason: 'ì˜í•™ì  íš¨ëŠ¥ì„ í™•ì •ì ìœ¼ë¡œ ë§í•˜ë©´ ë¯¼ê°í•´ìš”.',
        replace: 'ì¼ìƒ ì¼€ì–´ì— ë„ì›€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê°œì¸ì°¨).'
      },
      {
        name: 'ê¶Œìœ„ ê³¼ì¥',
        regex: /(ì˜ì‚¬\\s*ì¸ì •|ì „ë¬¸ì˜\\s*ì¶”ì²œ|ì„ìƒ\\s*ê²€ì¦|ë…¼ë¬¸\\s*ì…ì¦|ê¸°ì )/g,
        reason: 'ê·¼ê±°ê°€ ë¶ˆëª…í™•í•˜ë©´ ê³¼ì¥ìœ¼ë¡œ ì˜¤í•´ë  ìˆ˜ ìˆì–´ìš”.',
        replace: 'ì‚¬ìš© í›„ê¸°/ì²´ê° ì‚¬ë¡€ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤(ê°œì¸ì°¨).'
      }
    ];

    function riskLevel(text) {
      let count = 0;
      for (const r of RULES) {
        if (r.regex.test(text)) count += 1;
        r.regex.lastIndex = 0;
      }
      if (count >= 3) return 'ìœ„í—˜';
      if (count >= 1) return 'ì£¼ì˜';
      return 'ì•ˆì „';
    }

    function textReplaceOne(text, regex, replacement) {
      regex.lastIndex = 0;
      return text.replace(regex, replacement);
    }

    function pickRisks(text) {
      const hits = [];
      for (const r of RULES) {
        const m = text.match(r.regex);
        if (m && m.length) {
          hits.push({
            phrase: m[0],
            reason: r.reason,
            replace: textReplaceOne(text, r.regex, r.replace)
          });
        }
      }
      while (hits.length < 3) {
        hits.push({
          phrase: 'ê³¼ì¥/ë‹¨ì • í‘œí˜„ ê°€ëŠ¥',
          reason: 'í‘œí˜„ì´ ê°•í•˜ë©´ ì‹ ê³ /ë°˜ë ¤ ë¦¬ìŠ¤í¬ê°€ ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”.',
          replace: 'ê°œì¸ì°¨ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë©° ë„ì›€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
        });
      }
      return hits.slice(0, 3);
    }

    function makeLabel() {
      return {
        short: 'AIê´‘ê³  í¬í•¨',
        long: 'ë³¸ ê´‘ê³ ì˜ ì¼ë¶€ ë¬¸êµ¬/ì´ë¯¸ì§€ëŠ” AIë¥¼ í™œìš©í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.'
      };
    }

    function platformCopy(baseText) {
      const short = baseText.replace(/\\s+/g, ' ').slice(0, 60);
      return {
        insta: short + 'â€¦ (ê°œì¸ì°¨ ìˆìŒ)',
        blog: 'ì•„ë˜ ë‚´ìš©ì€ ì œí’ˆ/ì„œë¹„ìŠ¤ ì•ˆë‚´ì´ë©°, ê°œì¸ì°¨ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\ní•µì‹¬ í¬ì¸íŠ¸: ' + short,
        kakao: 'ê°„ë‹¨ ì•ˆë‚´ë“œë ¤ìš” ğŸ™‚\\n' + short + '\\n(ê°œì¸ì°¨ê°€ ìˆì„ ìˆ˜ ìˆì–´ìš”!)'
      };
    }

    function buildOutput(input) {
      const lvl = riskLevel(input);
      const label = makeLabel();
      const risks = pickRisks(input);

      let softened = input;
      for (const r of RULES) {
        softened = softened.replace(r.regex, r.replace);
        r.regex.lastIndex = 0;
      }
      const pf = platformCopy(softened);

      const checklist = [
        'â€˜100%/ë¬´ì¡°ê±´/ë³´ì¥â€™ ê°™ì€ ë‹¨ì • í‘œí˜„ ì œê±°í–ˆë‚˜ìš”?',
        'ë‹¨ê¸°ê°„ ê²°ê³¼(í•˜ë£¨/3ì¼/ì¦‰ì‹œ)ë¥¼ í™•ì •í•˜ì§€ ì•Šì•˜ë‚˜ìš”?',
        'ì˜í•™/ì¹˜ë£Œ/ì™„ì¹˜ì²˜ëŸ¼ ë¯¼ê°í•œ íš¨ëŠ¥ ë‹¨ì •ì´ ì—†ë‚˜ìš”?',
        'ê°œì¸ì°¨/ì‚¬ìš©í™˜ê²½ ì°¨ì´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ë„£ì—ˆë‚˜ìš”?',
        'í”Œë«í¼ì— ë§ê²Œ ê¸¸ì´/í†¤ì„ ë§ì·„ë‚˜ìš”?'
      ];

      return (
`# 1) ê²°ê³¼ ìš”ì•½
- ìœ„í—˜ë„: ${lvl}
- í•œ ì¤„ ì½”ë©˜íŠ¸: ê°•í•œ í‘œí˜„ì„ â€˜ê°œì¸ì°¨/ë„ì›€â€™ ì¤‘ì‹¬ìœ¼ë¡œ ì™„í™”í•˜ë©´ ì•ˆì „ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.

# 2) AI ê´‘ê³  í‘œê¸°(ë¼ë²¨) ë¬¸êµ¬ 2ì¢…
- ì§§ì€ ë²„ì „(15ì ë‚´ì™¸): ${label.short}
- ê¸´ ë²„ì „(1~2ë¬¸ì¥): ${label.long}

# 3) ìœ„í—˜ í‘œí˜„ 3ê°œ & ëŒ€ì²´ ë¬¸ì¥
1) ë¬¸ì œ ë¬¸êµ¬: ${risks[0].phrase}
   ì™œ ìœ„í—˜(1ì¤„): ${risks[0].reason}
   ëŒ€ì²´ ë¬¸ì¥(1ì¤„): ${risks[0].replace}
2) ë¬¸ì œ ë¬¸êµ¬: ${risks[1].phrase}
   ì™œ ìœ„í—˜(1ì¤„): ${risks[1].reason}
   ëŒ€ì²´ ë¬¸ì¥(1ì¤„): ${risks[1].replace}
3) ë¬¸ì œ ë¬¸êµ¬: ${risks[2].phrase}
   ì™œ ìœ„í—˜(1ì¤„): ${risks[2].reason}
   ëŒ€ì²´ ë¬¸ì¥(1ì¤„): ${risks[2].replace}

# 4) í”Œë«í¼ìš© ë¬¸êµ¬ ë³€í™˜(3ì¢…)
- ì¸ìŠ¤íƒ€/ì‡¼ì¸ ìš©(ì§§ê²Œ): ${pf.insta}
- ë„¤ì´ë²„/ë¸”ë¡œê·¸ìš©(ì„¤ëª…í˜•): ${pf.blog}
- ì¹´í†¡/ë¬¸ììš©(ì¹œê·¼): ${pf.kakao}

# 5) ë°”ë¡œ ì ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸(5ê°œ)
- [ ] ${checklist[0]}
- [ ] ${checklist[1]}
- [ ] ${checklist[2]}
- [ ] ${checklist[3]}
- [ ] ${checklist[4]}

ë³¸ ê²°ê³¼ëŠ” ë²•ë¥  ìë¬¸ì´ ì•„ë‹Œ ì¼ë°˜ì ì¸ ì•ˆì „ ê°€ì´ë“œì…ë‹ˆë‹¤.`
      );
    }

    const inputEl = document.getElementById('input');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const outputCard = document.getElementById('outputCard');
    const outputEl = document.getElementById('output');
    const copyBtn = document.getElementById('copyBtn');

    document.getElementById('ex1').onclick = () => {
      inputEl.value = 'ì´ ì œí’ˆë§Œ ë¨¹ìœ¼ë©´ 3ì¼ ì•ˆì— -5kg ë¬´ì¡°ê±´ ê°ëŸ‰! ë¶€ì‘ìš© 0% 100% ë³´ì¥. ì˜¤ëŠ˜ë§Œ ë°˜ê°’!';
    };
    document.getElementById('ex2').onclick = () => {
      inputEl.value = 'ì˜ì‚¬ê°€ ì¸ì •í•œ ê¸°ì ì˜ ì•°í”Œ! 1ì£¼ì¼ ë§Œì— ì£¼ë¦„ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤. ì„ìƒìœ¼ë¡œ ê²€ì¦ëœ í™•ì‹¤í•œ íš¨ê³¼!';
    };
    document.getElementById('ex3').onclick = () => {
      inputEl.value = 'AIê°€ ê´‘ê³  ë¬¸êµ¬ë¥¼ ì ê²€í•˜ê³  í‘œê¸° ë¬¸êµ¬ê¹Œì§€ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤. ì´ˆë³´ ì‚¬ì¥ë‹˜ë„ 10ì´ˆë©´ ê´‘ê³  ë¬¸êµ¬ë¥¼ ë” ì•ˆì „í•˜ê²Œ ìˆ˜ì • ê°€ëŠ¥!';
    };

    let isLoading = false;

    analyzeBtn.onclick = () => {
      const text = (inputEl.value || '').trim();
      if (!text) {
        alert('ê´‘ê³  ë¬¸êµ¬ë¥¼ ë¨¼ì € ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”!');
        return;
      }
      if (isLoading) return;

      isLoading = true;
      analyzeBtn.disabled = true;
      analyzeBtn.textContent = 'ë¶„ì„ ì¤‘...';
      outputCard.classList.add('hidden');
      outputEl.textContent = '';

      setTimeout(() => {
        const result = buildOutput(text);
        outputEl.textContent = result;
        outputCard.classList.remove('hidden');

        isLoading = false;
        analyzeBtn.disabled = false;
        analyzeBtn.textContent = 'ê²€ì‚¬';
      }, 300);
    };

    copyBtn.onclick = async () => {
      const text = (outputEl.textContent || '').trim();
      if (!text) return;
      const finalText = text + '\\n\\n' + SOURCE_LINE;

      try {
        await navigator.clipboard.writeText(finalText);
        alert('ë³µì‚¬ ì™„ë£Œ!');
      } catch (e) {
        const ta = document.createElement('textarea');
        ta.value = finalText;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        alert('ë³µì‚¬ ì™„ë£Œ!');
      }
    };
  </script>
</body>
</html>
