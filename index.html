<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AD-Guard AI: ê´‘ê³  ê·œì œ ì¤€ìˆ˜ ì „ë¬¸ê°€</title>
    <!-- CDN Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@100;400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { font-family: 'Pretendard', sans-serif; }
        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .premium-bg { background: linear-gradient(135deg, #f5f7ff 0%, #ffffff 100%); }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/",
    "vite": "https://esm.sh/vite@^7.3.0",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { GoogleGenAI, Type } from 'https://esm.sh/@google/genai';

        // --- Types & Constants ---
        const AppStatus = {
            IDLE: 'IDLE',
            LOADING: 'LOADING',
            SUCCESS: 'SUCCESS',
            ERROR: 'ERROR'
        };

        const SYSTEM_INSTRUCTION = `ë‹¹ì‹ ì€ ëŒ€í•œë¯¼êµ­ ê´‘ê³ ë²• ë° 2026ë…„ ì‹œí–‰ ì˜ˆì •ì¸ 'AI ìƒì„± ì½˜í…ì¸  í‘œê¸° ì˜ë¬´ ì§€ì¹¨'ì— íŠ¹í™”ëœ [ê´‘ê³  ê·œì œ ì¤€ìˆ˜ ì „ë¬¸ê°€]ì…ë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ê´‘ê³  ë¬¸êµ¬ë¥¼ ì…ë ¥í•˜ë©´, ë²•ì  ì˜ë¬´ í‘œê¸° ì‚¬í•­ì„ ìƒì„±í•˜ê³  ìœ„í—˜ ìš”ì†Œë¥¼ ë¶„ì„í•˜ì—¬ ëŒ€ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.

## ë¶„ì„ ë¡œì§
1. í•œêµ­ ë°©ì†¡í†µì‹ ìœ„ì›íšŒ ë° ê³µì •ê±°ë˜ìœ„ì›íšŒì˜ ìµœì‹  ê°€ì´ë“œë¼ì¸ì„ ì¤€ìˆ˜í•  ê²ƒ.
2. 'ìµœê³ ', 'ì „ ì„¸ê³„ 1ìœ„', 'ì¦‰ì‹œ ì™„ì¹˜', 'ë¶€ì‘ìš© ì—†ìŒ' ë“± ê²€ì¦ ë¶ˆê°€ëŠ¥í•œ ì ˆëŒ€ì  í‘œí˜„ì€ ë¬´ì¡°ê±´ ìœ„í—˜ í‘œí˜„ìœ¼ë¡œ ë¶„ë¥˜í•  ê²ƒ.
3. AI ìƒì„±ë¬¼ì„ì„ ëª…ì‹œí•  ë•Œ UXë¥¼ ê³ ë ¤í•˜ì—¬ ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸êµ¬ë¥¼ ìƒì„±í•  ê²ƒ.

## ì¶œë ¥ í•„ìˆ˜ í•­ëª©
- AI í‘œê¸° ë¼ë²¨ (Label)
- ìœ„í—˜ ìš”ì†Œ ë¶„ì„ TOP 3 (Risks)
- 10ì´ˆ ì„¸ì´í”„í‹° ëŒ€ì²´ì•ˆ (Safety Alternative)
- ì‚¬ìš©ìê°€ "/premium" í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ìš”ì²­í•œ ê²½ìš°ì—ë§Œ í”„ë¦¬ë¯¸ì—„ í”Œë«í¼ë³„(ì¸ìŠ¤íƒ€ê·¸ë¨, ë„¤ì´ë²„ ë¸”ë¡œê·¸, ìœ íŠœë¸Œ, ëœë”© í˜ì´ì§€ CTA) ì¶”ê°€ ë¬¸êµ¬ ìƒì„±.

ì‘ë‹µì€ ë°˜ë“œì‹œ ì§€ì •ëœ JSON í˜•ì‹ì„ ë”°ë¥´ì„¸ìš”.`;

        // --- Components ---

        const SettingsModal = ({ isOpen, onClose }) => {
            if (!isOpen) return null;
            const handleOpenKeySelector = async () => {
                if (window.aistudio?.openSelectKey) {
                    await window.aistudio.openSelectKey();
                    onClose();
                } else {
                    alert("ì´ í™˜ê²½ì—ì„œëŠ” ìë™ í‚¤ ì„ íƒ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
            };

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm">
                    <div className="bg-white w-full max-w-md rounded-3xl shadow-2xl border border-slate-100 overflow-hidden animate-in">
                        <div className="bg-blue-600 p-6 text-white flex justify-between items-center">
                            <h3 className="text-xl font-bold flex items-center"><i className="fa-solid fa-gear mr-2"></i>ì„œë¹„ìŠ¤ ì„¤ì •</h3>
                            <button onClick={onClose}><i className="fa-solid fa-xmark text-2xl"></i></button>
                        </div>
                        <div className="p-8 space-y-6">
                            <section>
                                <h4 className="text-slate-900 font-bold mb-2 flex items-center"><i className="fa-solid fa-key text-blue-500 mr-2"></i>Gemini API í‚¤</h4>
                                <p className="text-sm text-slate-500 mb-4">ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•´ ë³¸ì¸ì˜ API í‚¤ ë“±ë¡ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                                <button onClick={handleOpenKeySelector} className="w-full py-4 bg-blue-50 hover:bg-blue-100 border-2 border-dashed border-blue-300 rounded-2xl text-blue-700 font-bold transition-all">
                                    API í‚¤ ì„¤ì •/ë³€ê²½í•˜ê¸°
                                </button>
                            </section>
                            <div className="bg-slate-50 p-4 rounded-xl text-xs text-slate-500 space-y-2">
                                <a href="https://aistudio.google.com/app/apikey" target="_blank" className="text-blue-600 font-bold underline block">ë¬´ë£Œ API í‚¤ ë°œê¸‰ë°›ê¸°</a>
                                <a href="https://ai.google.dev/gemini-api/docs/billing" target="_blank" className="text-indigo-600 font-bold underline block">ê²°ì œ ë° í”„ë¡œì íŠ¸ ì„¤ì • ê°€ì´ë“œ</a>
                            </div>
                        </div>
                        <div className="px-8 pb-8"><button onClick={onClose} className="w-full py-3 bg-slate-900 text-white rounded-xl font-bold">ë‹«ê¸°</button></div>
                    </div>
                </div>
            );
        };

        const AnalysisInput = ({ onAnalyze, isLoading }) => {
            const [text, setText] = React.useState('');
            return (
                <div className="bg-white rounded-2xl shadow-xl p-6 border border-slate-200 animate-in">
                    <form onSubmit={(e) => { e.preventDefault(); onAnalyze(text); }} className="space-y-4">
                        <div className="flex justify-between items-center">
                            <label className="text-sm font-bold text-slate-700 flex items-center"><i className="fa-solid fa-pen-nib mr-2 text-blue-600"></i>ê´‘ê³  ë¬¸êµ¬ ì…ë ¥</label>
                            <span className="text-xs text-slate-400">íŒ: <code className="bg-slate-100 px-1 rounded text-blue-600">/premium</code> í¬í•¨ ì‹œ í™•ì¥ ë¶„ì„</span>
                        </div>
                        <textarea
                            value={text}
                            onChange={(e) => setText(e.target.value)}
                            placeholder="ì˜ˆ: ì „ ì„¸ê³„ 1ìœ„ ê´€ì ˆ ì˜ì–‘ì œ, ì¦‰ì‹œ í†µì¦ ì™„í™”!"
                            className="w-full h-40 p-4 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none transition-all resize-none"
                            disabled={isLoading}
                        />
                        <button type="submit" disabled={!text.trim() || isLoading} className={`w-full py-4 rounded-xl font-bold text-white transition-all flex items-center justify-center space-x-2 ${isLoading ? 'bg-slate-400' : 'bg-gradient-to-r from-blue-600 to-indigo-700 hover:shadow-lg active:scale-95'}`}>
                            {isLoading ? <span>ê·œì œ ë¶„ì„ ì¤‘...</span> : <><i className="fa-solid fa-shield-halved"></i><span>ì»´í”Œë¼ì´ì–¸ìŠ¤ ê²€ì‚¬ ë° AI ë¼ë²¨ ìƒì„±</span></>}
                        </button>
                    </form>
                </div>
            );
        };

        const ResultsView = ({ result }) => {
            const [copied, setCopied] = React.useState(false);
            const handleCopy = () => {
                const text = `[ğŸ·ï¸ AI í‘œê¸°]\n${result.label}\n\n[âš ï¸ ìœ„í—˜ ìš”ì†Œ]\n${result.risks.map((r, i) => `${i+1}. ${r.word}: ${r.reason}`).join('\n')}\n\n[âœ¨ ëŒ€ì²´ì•ˆ]\n${result.safetyAlternative}`;
                navigator.clipboard.writeText(text).then(() => { setCopied(true); setTimeout(() => setCopied(false), 2000); });
            };

            return (
                <div className="space-y-6 animate-in">
                    <div className="flex justify-between items-center">
                        <h3 className="text-lg font-bold">ë¶„ì„ ê²°ê³¼ ë¦¬í¬íŠ¸</h3>
                        <button onClick={handleCopy} className={`px-4 py-2 rounded-lg text-sm font-bold text-white transition-all ${copied ? 'bg-emerald-500' : 'bg-blue-600'}`}>
                            {copied ? 'ë³µì‚¬ë¨!' : 'ì „ì²´ ë³µì‚¬'}
                        </button>
                    </div>
                    <section className="bg-blue-50 border border-blue-100 rounded-2xl p-6">
                        <h3 className="text-blue-900 font-bold mb-2 flex items-center"><i className="fa-solid fa-tag mr-2"></i>ğŸ·ï¸ AI ê´‘ê³  í•„ìˆ˜ í‘œê¸°</h3>
                        <div className="bg-white p-4 rounded-xl border border-blue-200 font-medium">{result.label}</div>
                    </section>
                    <section className="bg-white border border-slate-200 rounded-2xl p-6">
                        <h3 className="text-slate-900 font-bold mb-4 flex items-center"><i className="fa-solid fa-triangle-exclamation text-amber-500 mr-2"></i>âš ï¸ ìœ„í—˜ ìš”ì†Œ ë¶„ì„</h3>
                        <div className="space-y-3">
                            {result.risks.map((risk, i) => (
                                <div key={i} className="p-3 bg-slate-50 rounded-lg border border-slate-100 flex items-start">
                                    <span className="w-6 h-6 bg-amber-100 text-amber-700 rounded-full flex items-center justify-center text-xs font-bold mr-3 mt-0.5">{i+1}</span>
                                    <div><span className="font-bold text-red-600 block">{risk.word}</span><p className="text-sm text-slate-600">{risk.reason}</p></div>
                                </div>
                            ))}
                        </div>
                    </section>
                    <section className="bg-emerald-50 border border-emerald-100 rounded-2xl p-6">
                        <h3 className="text-emerald-900 font-bold mb-2 flex items-center"><i className="fa-solid fa-wand-magic-sparkles mr-2"></i>âœ¨ ì„¸ì´í”„í‹° ëŒ€ì²´ì•ˆ</h3>
                        <div className="bg-white p-5 rounded-xl border border-emerald-200 font-medium">{result.safetyAlternative}</div>
                    </section>
                </div>
            );
        };

        const PremiumResults = ({ premium }) => (
            <div className="mt-10 pt-10 border-t-2 border-dashed border-indigo-200 animate-in">
                <div className="flex items-center space-x-2 mb-6"><span className="bg-indigo-600 text-white px-3 py-1 rounded-full text-xs font-bold">PREMIUM</span><h2 className="text-xl font-bold">í”Œë«í¼ë³„ í™•ì¥ ì½˜í…ì¸ </h2></div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div className="bg-white rounded-2xl border p-6"><h4 className="font-bold mb-2 flex items-center"><i className="fa-brands fa-instagram text-pink-600 mr-2"></i>ì¸ìŠ¤íƒ€ê·¸ë¨</h4><p className="text-sm text-slate-600 bg-slate-50 p-3 rounded-lg">{premium.instagram}</p></div>
                    <div className="bg-white rounded-2xl border p-6"><h4 className="font-bold mb-2 flex items-center"><i className="fa-brands fa-youtube text-red-600 mr-2"></i>ìœ íŠœë¸Œ ìë§‰</h4><p className="text-sm text-slate-600 bg-slate-50 p-3 rounded-lg">{premium.youtube}</p></div>
                    <div className="bg-white rounded-2xl border p-6 md:col-span-2"><h4 className="font-bold mb-2 flex items-center"><i className="fa-solid fa-newspaper text-emerald-600 mr-2"></i>ë„¤ì´ë²„ ë¸”ë¡œê·¸</h4><p className="text-sm text-slate-600 bg-slate-50 p-3 rounded-lg whitespace-pre-wrap">{premium.naverBlog}</p></div>
                    <div className="bg-indigo-50 rounded-2xl border border-indigo-100 p-6 md:col-span-2"><h4 className="font-bold mb-3">ëœë”© í˜ì´ì§€ CTA</h4><div className="flex flex-wrap gap-2">{premium.landingPage.map((cta, i) => <button key={i} className="bg-white px-4 py-2 rounded-full text-indigo-700 font-bold shadow-sm">{cta}</button>)}</div></div>
                </div>
            </div>
        );

        // --- Main App ---

        const App = () => {
            const [status, setStatus] = React.useState(AppStatus.IDLE);
            const [result, setResult] = React.useState(null);
            const [error, setError] = React.useState(null);
            const [isSettingsOpen, setIsSettingsOpen] = React.useState(false);

            const handleAnalyze = async (copy) => {
                const apiKey = process.env.API_KEY || (window.aistudio?.hasSelectedApiKey && await window.aistudio.hasSelectedApiKey());
                if (!apiKey) { setError("API í‚¤ë¥¼ ë¨¼ì € ë“±ë¡í•´ì£¼ì„¸ìš”."); setIsSettingsOpen(true); return; }
                
                setStatus(AppStatus.LOADING);
                setError(null);
                const isPremium = copy.includes('/premium');

                try {
                    const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                    const response = await ai.models.generateContent({
                        model: 'gemini-3-pro-preview',
                        contents: `ë¶„ì„í•  ê´‘ê³  ë¬¸êµ¬: "${copy}" ${isPremium ? '(í”„ë¦¬ë¯¸ì—„ ëª¨ë“œ)' : ''}`,
                        config: {
                            systemInstruction: SYSTEM_INSTRUCTION,
                            responseMimeType: "application/json",
                            responseSchema: {
                                type: Type.OBJECT,
                                properties: {
                                    label: { type: Type.STRING },
                                    risks: { type: Type.ARRAY, items: { type: Type.OBJECT, properties: { word: { type: Type.STRING }, reason: { type: Type.STRING } }, required: ["word", "reason"] } },
                                    safetyAlternative: { type: Type.STRING },
                                    premium: { type: Type.OBJECT, properties: { instagram: { type: Type.STRING }, naverBlog: { type: Type.STRING }, youtube: { type: Type.STRING }, landingPage: { type: Type.ARRAY, items: { type: Type.STRING } } } }
                                },
                                required: ["label", "risks", "safetyAlternative"]
                            }
                        }
                    });
                    setResult(JSON.parse(response.text));
                    setStatus(AppStatus.SUCCESS);
                } catch (err) {
                    console.error(err);
                    setError("ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. API í‚¤ì™€ ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");
                    setStatus(AppStatus.ERROR);
                }
            };

            return (
                <div className="min-h-screen pb-20">
                    <SettingsModal isOpen={isSettingsOpen} onClose={() => setIsSettingsOpen(false)} />
                    <header className="bg-white/80 border-b border-slate-200 sticky top-0 z-50 backdrop-blur-md">
                        <div className="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center space-x-2">
                                <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center"><i className="fa-solid fa-shield-check text-white"></i></div>
                                <h1 className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-indigo-800">AD-Guard AI</h1>
                            </div>
                            <button onClick={() => setIsSettingsOpen(true)} className="w-10 h-10 rounded-full hover:bg-slate-100 text-slate-600 flex items-center justify-center transition-colors"><i className="fa-solid fa-gear text-lg"></i></button>
                        </div>
                    </header>
                    <main className="max-w-4xl mx-auto px-4 pt-12">
                        <div className="text-center mb-12">
                            <h2 className="text-4xl font-extrabold text-slate-900 mb-4 tracking-tight">ëŒ€í•œë¯¼êµ­ ê´‘ê³  ê·œì œ ì¤€ìˆ˜, <span className="text-blue-600">AIë¡œ í•œ ë²ˆì—</span></h2>
                            <p className="text-slate-600 text-lg max-w-2xl mx-auto">ê³¼ëŒ€ê´‘ê³  ì§„ë‹¨ ë° 2026ë…„ AI ìƒì„± í‘œê¸° ì§€ì¹¨ì„ ì¤€ìˆ˜í•˜ëŠ” ì†”ë£¨ì…˜</p>
                        </div>
                        <AnalysisInput onAnalyze={handleAnalyze} isLoading={status === AppStatus.LOADING} />
                        {error && <div className="mt-8 bg-red-50 border border-red-200 rounded-xl p-6 text-red-700 text-sm animate-in"><i className="fa-solid fa-circle-exclamation mr-2"></i>{error}</div>}
                        <div className="mt-12">
                            {status === AppStatus.SUCCESS && result && (
                                <><ResultsView result={result} />{result.premium && <PremiumResults premium={result.premium} />}</>
                            )}
                            {status === AppStatus.IDLE && (
                                <div className="bg-slate-100/50 border-2 border-dashed border-slate-200 rounded-3xl p-16 text-center text-slate-400">ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
                            )}
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>